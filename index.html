<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Jones Bar WX Public Data</title>
  </head>
  <body>
    <h1>Jones Bar WX Public Data</h1>
    <ul>
      <li><a href="data/outdoor_conditions.json">outdoor_conditions.json</a></li>
      <li><a href="data/outdoor_conditions.csv">outdoor_conditions.csv</a></li>
    </ul>
	<div class="meta" id="status">
  		File generated at: loading…<br>
  		Newest data timestamp: loading…
	</div>
    <p>Generated by a private publisher on a schedule.</p>
	<script>
  fetch("data/outdoor_conditions.json")
    .then(response => response.json())
    .then(data => {
      const gen = data.generated_at_utc ? (data.generated_at_utc + " UTC") : "unavailable";
      const latest = data.latest_row_timestamp_utc ? (data.latest_row_timestamp_utc + " UTC") : "unavailable";

      document.getElementById("status").innerHTML =
        "File generated at: " + gen + "<br>" +
        "Newest data timestamp: " + latest;
    })
    .catch(() => {
      document.getElementById("status").textContent =
        "Status: unable to load";
    });
	</script>

  </body>
</html>
